---
layout: post
title:  Давайте использовать стейт правильно
date:   2017-09-17 21:30
categories: ru haskell
---

# Говно

{% highlight haskell %}
{% include 2017-09-17-update-or-with/update.hs %}
{% endhighlight %}

# Охуенно

{% highlight haskell %}
{% include 2017-09-17-update-or-with/with.hs %}
{% endhighlight %}

# Это на самом деле не пост про хаскель,

Просто на нем все выглядит понятно и доходчиво. А теперь представьте себе,
что у вас есть язык с сайд-эффектами. Так какого хрена вы пишете

{% highlight ruby %}
I18n.locale = :ru
{% endhighlight %}

, а не

{% highlight ruby %}
I18n.with_locale(:ru) do
{% endhighlight %}

?????

# На самом деле я пригорел даже не с руби,

что само по себе редкий случай, а с flow, написанного, на минуточку, на
ocaml. Который типа функциональный и все такое. Почему там стейт ебаного
логгера управляется так?

# И эти люди еще хотят,

чтобы компилятор сам решал когда можно пустить в несколько потоков, а когда
нет. Пиздец

# Да, этот пост про

haskell, ocaml, ruby и js одновременно. Привыкайте, епт

# Мини-анонс

Скоро (возможно даже в этом году) будет пост про динамические переменные.
Рекомендую не пропустить, там будет про охуеннейшую штуку, которую почему то
не завезли в "мейнстримные" скриптовые языки. В хаскеле, понятное дело, оно
имеет не больше смысла, чем в эрланге, но все равно стоит почитать.
Да, это что то типа withReaderT

# PS

да, поцоны, я пишу логгер без монады Writer. Почему? Идите нахуй, вот почему
